@page "/createnote"
@using WebUI.Services;
@using global::Data.ViewModels;
@inject INoteService noteService;
@inject IJSRuntime JsRuntime;

<h2>Create Note</h2>

<EditForm Model="model" OnValidSubmit="@HandleValidSumbit">
    <div class="container">
        <div class="d-flex justify-content-center">
            <div class="col-xl-4 col-lg-5 col-md-8 col-sm-12">
                <div class="d-flex flex-column">
                    <label>Title</label>
                    <InputText id="title" @bind-Value="model.Title"/>
                    <label>Details</label>
                    <InputText id="details" @bind-Value="model.Details"/>
                    <button type="submit" class="mt-3">Submit</button>
                </div>
            </div>
        </div>
    </div>
</EditForm>

@code {
    private CreateNoteViewModel model = new CreateNoteViewModel();

    private async void HandleValidSumbit() 
    {
        var result = await noteService.Create(model);
        if (result != Guid.Empty)
            await JsRuntime.InvokeVoidAsync("alert", "success");
    }
}